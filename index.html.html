<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Certificate & Receipt Verification | Alumni GHS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --background-color: #ecf0f1;
      --card-bg-color: #ffffff;
      --text-color: #333;
      --light-text-color: #7f8c8d;
      --error-color: #e74c3c;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow-x: hidden;
    }

    /* Subtle background pattern overlay */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.4) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.4) 0%, transparent 20%);
      pointer-events: none;
      z-index: -1;
    }

    .container {
      background-color: var(--card-bg-color);
      padding: 3rem;
      border-radius: 16px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      width: 90%;
      max-width: 600px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      z-index: 1;
    }

    .container:hover {
      transform: scale(1.01);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
    }

    .header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    h1 {
      color: var(--primary-color);
      font-family: 'Montserrat', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.3rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    p.subtitle {
      color: var(--light-text-color);
      font-size: 1rem;
      margin-bottom: 0;
    }

    label {
      display: block;
      text-align: left;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--primary-color);
    }

    .input-group {
      margin-bottom: 2rem;
    }

    .input-group input {
      width: 100%;
      padding: 1.2rem;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 1rem;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--secondary-color);
      box-shadow: 0 0 10px rgba(52, 152, 219, 0.2);
    }

    button {
      background-color: var(--secondary-color);
      color: white;
      padding: 1.2rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      font-size: 1.1rem;
      font-weight: 600;
      transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
      position: relative;
    }

    button:hover {
      background-color: #2980b9;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    button:active {
      transform: translateY(0);
    }

    #result {
      margin-top: 2.5rem;
      text-align: left;
      opacity: 0;
      transition: opacity 0.6s ease;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 0.7rem 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .detail-row strong {
      color: var(--primary-color);
      font-size: 1rem;
    }

    .detail-row span {
      color: var(--text-color);
      font-size: 1rem;
      text-align: right;
    }

    .error-message {
      color: var(--error-color);
      font-weight: 600;
    }

    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid #fff;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      animation: spin 0.8s linear infinite;
      margin-left: 8px;
      display: inline-block;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .hidden {
      display: none;
    }

    .disclaimer-container {
      max-width: 600px;
      margin-top: 2rem;
      padding: 1rem;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(5px);
      font-size: 0.9rem;
      color: #555;
    }

    footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #555;
      text-align: center;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .container {
        padding: 2rem;
      }
      
      h1 {
        font-size: 1.7rem;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .input-group input, button {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Document Authenticity Verification</h1>
      <p class="subtitle">Alumni Association Ghola High School (H.S)</p>
    </div>

    <div class="input-group">
      <label for="receiptNumber">Enter Receipt or Certificate ID</label>
      <input type="text" id="receiptNumber" placeholder="e.g. AS/DR-25/1002000000">
    </div>

    <button id="viewDetailsBtn" onclick="getDetails()">
      Verify Record
      <span id="loadingSpinner" class="spinner hidden"></span>
    </button>

    <div id="result"></div>
  </div>

  <div class="disclaimer-container">
    <strong>Disclaimer:</strong> This verification system is for authentic records issued by Alumni GHS. The records available here are the only valid ones. Any record not found in this system is considered false and invalid.
  </div>

  <footer>&copy; Alumni GHS 2024 | Alumni Association Of Ghola High School</footer>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx6o0LPjUBmcBgGLF_bFXO2RqPDPkVbMGJgWkQPy4Ofcx9zjERoAMlaAMKPY1jE94P2jw/exec';

    async function getDetails() {
      const receiptNumberInput = document.getElementById('receiptNumber');
      const resultDiv = document.getElementById('result');
      const viewDetailsBtn = document.getElementById('viewDetailsBtn');
      const loadingSpinner = document.getElementById('loadingSpinner');

      viewDetailsBtn.disabled = true;
      loadingSpinner.classList.remove('hidden');
      resultDiv.style.opacity = '0';

      const receiptNumber = receiptNumberInput.value.trim();
      if (!receiptNumber) {
        resultDiv.innerHTML = '<p class="error-message">⚠ Please enter a valid ID.</p>';
        resultDiv.style.opacity = '1';
        viewDetailsBtn.disabled = false;
        loadingSpinner.classList.add('hidden');
        return;
      }

      try {
        const response = await fetch(`${SCRIPT_URL}?receiptNumber=${encodeURIComponent(receiptNumber)}`);
        const data = await response.json();

        if (data.status === 'success') {
          const details = data.details;
          let detailsHtml = '';
          for (const key in details) {
            if (details.hasOwnProperty(key) && details[key]) {
              const formattedKey = key.replace(/([A-Z])/g, ' $1').trim();
              detailsHtml += `<div class="detail-row"><strong>${formattedKey}:</strong> <span>${details[key]}</span></div>`;
            }
          }
          resultDiv.innerHTML = detailsHtml;
        } else {
          resultDiv.innerHTML = `<p class="error-message">❌ ${data.message}</p>`;
        }
        resultDiv.style.opacity = '1';
      } catch (error) {
        console.error('Error fetching data:', error);
        resultDiv.innerHTML = '<p class="error-message">⚠ Failed to verify record. Please try again later.</p>';
        resultDiv.style.opacity = '1';
      } finally {
        viewDetailsBtn.disabled = false;
        loadingSpinner.classList.add('hidden');
      }
    }

    // Allow form submission with Enter key
    document.getElementById('receiptNumber').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        getDetails();
      }
    });
  </script>
</body>
</html>